<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PDF2 Access Maze</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #fef6e4;
      font-family: "Comic Sans MS", cursive, sans-serif;
    }
    canvas {
      border: 4px dashed #ff6f61;
      background: #fffbea;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
    }
    #message {
      margin-top: 15px;
      font-size: 20px;
      color: #008000;
      text-align: center;
    }
    h2 {
      text-align: center;
      color: #ff6f61;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div>
    <h2>ðŸšš  PDF<sup>2</sup> Access Maze ðŸš€</h2>
    <canvas id="maze" width="400" height="400"></canvas>
    <div id="message"></div>
  </div>

  <script>
    const canvas = document.getElementById('maze');
    const ctx = canvas.getContext('2d');
    const size = 40; // block size

    // 0 = empty, 1 = wall, 2 = start, 3 = exit
    let maze = [
      [2,0,1,0,0,0,1,0,0,3],
      [1,0,1,0,1,0,1,0,1,1],
      [1,0,0,0,1,0,0,0,0,0],
      [1,1,1,0,1,1,1,1,1,0],
      [0,0,0,0,0,0,0,0,1,0],
      [0,1,1,1,1,1,1,0,1,0],
      [0,0,0,0,0,0,1,0,0,0],
      [1,1,1,1,1,0,1,1,1,0],
      [0,0,0,0,1,0,0,0,0,0],
      [0,1,1,0,1,1,1,1,1,1]
    ];

    let player = { x: 0, y: 0 };
    let truckImg = new Image();
    truckImg.src = "truck.png"; // Truck emoji image

    let exitMoves = 0; // counter to allow only 2 moves

    // find start
    for (let y=0; y<maze.length; y++) {
      for (let x=0; x<maze[y].length; x++) {
        if (maze[y][x] === 2) {
          player.x = x;
          player.y = y;
        }
      }
    }

    function drawMaze() {
      for (let y=0; y<maze.length; y++) {
        for (let x=0; x<maze[y].length; x++) {
          if (maze[y][x] === 1) {
            ctx.fillStyle = '#333';
            ctx.fillRect(x*size, y*size, size, size);
          } else if (maze[y][x] === 3) {
            ctx.fillStyle = '#ffcccb';
            ctx.fillRect(x*size, y*size, size, size);
            ctx.fillStyle = 'black';
            ctx.font = "20px Arial";
            ctx.fillText("ðŸ", x*size+8, y*size+28);
          } else {
            ctx.fillStyle = '#fffbea';
            ctx.fillRect(x*size, y*size, size, size);
          }
          ctx.strokeStyle = '#ddd';
          ctx.strokeRect(x*size, y*size, size, size);
        }
      }
      // Draw truck (player)
      ctx.drawImage(truckImg, player.x*size+4, player.y*size+4, size-8, size-8);
    }

    function findExit() {
      for (let y=0; y<maze.length; y++) {
        for (let x=0; x<maze[y].length; x++) {
          if (maze[y][x] === 3) return {x,y};
        }
      }
      return null;
    }

    function moveExit() {
      if (exitMoves >= 2) return; // limit to 2 moves
      let oldExit = findExit();
      if (oldExit) maze[oldExit.y][oldExit.x] = 0;
      let newX, newY;
      do {
        newX = Math.floor(Math.random()*maze[0].length);
        newY = Math.floor(Math.random()*maze.length);
      } while (maze[newY][newX] !== 0);
      maze[newY][newX] = 3;
      exitMoves++;
    }

    function move(dx, dy) {
      let nx = player.x + dx;
      let ny = player.y + dy;
      if (nx < 0 || ny < 0 || ny >= maze.length || nx >= maze[0].length) return;
      if (maze[ny][nx] === 1) return; // wall

      player.x = nx;
      player.y = ny;

      // Check distance to exit
      let exit = findExit();
      if (exit) {
        let dist = Math.abs(exit.x - player.x) + Math.abs(exit.y - player.y);
        if (dist === 1) {
          moveExit(); // change exit when truck is one step away
        }
      }

      drawMaze();

      if (exit && player.x === exit.x && player.y === exit.y) {
        document.getElementById('message').innerText = 'ðŸŽ‰ Hackathon Gate Unlocked! Redirecting...';
        setTimeout(() => {
          window.location.href = "https://priyanshukum-array.github.io/PDF2/"; // apni website daalo
        }, 2000);
      }
    }

    // Funny reversed controls ðŸ˜†
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowUp') move(0,1); // up = down
      if (e.key === 'ArrowDown') move(0,-1); // down = up
      if (e.key === 'ArrowLeft') move(1,0); // left = right
      if (e.key === 'ArrowRight') move(-1,0); // right = left
    });

    truckImg.onload = () => drawMaze();
  </script>
</body>
</html>

